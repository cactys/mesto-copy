(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var n=function(){function n(e,r,o){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t(this,"_handleCardClick",(function(){i._handleOpenPopup(i._title,i._image)})),t(this,"_handleDeleteCard",(function(){i._element.remove(),i._element=null})),t(this,"_handleLikeCard",(function(){i._buttonLike.classList.toggle("card__like-button_active")})),this._title=e.name,this._image=e.link,this._cardSelector=r,this._handleOpenPopup=o}var r,o;return r=n,(o=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._cardImage=this._element.querySelector(".card__image"),this._cardTitle=this._element.querySelector(".card__name"),this._buttonLike=this._element.querySelector(".card__like-button"),this._buttonDelete=this._element.querySelector(".card__trach-icon"),this._cardImage.src=this._image,this._cardImage.alt=this._title,this._cardTitle.textContent=this._title,this._setEventListeners(),this._element}},{key:"_setEventListeners",value:function(){this._cardImage.addEventListener("click",this._handleCardClick),this._buttonDelete.addEventListener("click",this._handleDeleteCard),this._buttonLike.addEventListener("click",this._handleLikeCard)}}])&&e(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),n}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=o((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"_showInputError",(function(e){var t=r._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(r._inputErrorClass),t.classList.add(r._errorClass),t.textContent=e.validationMessage})),i(this,"_hideInputError",(function(e){var t=r._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(r._inputErrorClass),t.classList.remove(r._errorClass),t.textContent=""})),i(this,"_hasInvalidInput",(function(){return r._inputList.some((function(e){return!e.validity.valid}))})),i(this,"_checkInputValidity",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e)})),i(this,"_setEventListeners",(function(){r.toggleButtonState(),r._formElement.addEventListener("submit",(function(e){e.preventDefault()})),r._inputList.forEach((function(e){e.addEventListener("input",(function(){r._checkInputValidity(e),r.toggleButtonState()}))}))})),i(this,"toggleButtonState",(function(){r._hasInvalidInput()?(r._buttonElement.disabled=!0,r._buttonElement.classList.add(r._inactiveButtonClass)):(r._buttonElement.disabled=!1,r._buttonElement.classList.remove(r._inactiveButtonClass))})),i(this,"enableValidation",(function(){r._setEventListeners()})),i(this,"resetError",(function(){r._inputList.forEach((function(e){r._hideInputError(e)})),r.toggleButtonState()})),this._formSelector=t.formSelector,this._inputSelector=t.inputSelector,this._inputErrorClass=t.inputErrorClass,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._errorClass=t.errorClass,this._formElement=n,this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector))})),s={formSelector:".form",inputSelector:".form__input",inputErrorClass:"form__input_inactive",submitButtonSelector:".form__submit",inactiveButtonClass:"form__submit_disabled",errorClass:"form__input-error_active"},l=document.querySelectorAll(".popup"),c=document.querySelector(".popup_type_profile"),u=document.querySelector(".popup_type_add-photo"),d=document.querySelector(".profile__edit-button"),p=document.querySelector(".profile__add-button"),_=document.querySelector(".profile__title"),m=document.querySelector(".profile__subtitle"),h=document.querySelector(".cards"),f=document.querySelector(".popup_type_photo"),v=document.querySelector(".photo-container__photo"),y=document.querySelector(".photo-container__photo-title"),b=document.querySelector(".form_edit-profile"),E=b.querySelector(".form__input_profile-name"),S=b.querySelector(".form__input_profile-job"),g=document.querySelector(".form_add-photo"),k=g.querySelector(".form__input_photo-title"),L=g.querySelector(".form__input_photo-src"),C=new a(s,b);C.enableValidation();var q=new a(s,g);q.enableValidation();var w=function(e){return new n(e,".card-template",I).generateCard()},I=function(e,t){v.src=t,v.alt=e,y.textContent=e,x(f)},x=function(e){document.addEventListener("keydown",j),e.classList.add("popup_opened")},B=function(e){document.removeEventListener("keydown",j),e.classList.remove("popup_opened")},j=function(e){if("Escape"===e.key){var t=document.querySelector(".popup_opened");B(t)}};[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){var t=w(e);h.append(t)})),g.addEventListener("submit",(function(){var e={name:k.value,link:L.value},t=w(e);h.prepend(t),g.reset(),B(u),q.resetError()})),b.addEventListener("submit",(function(){_.textContent=E.value,m.textContent=S.value,B(c)})),l.forEach((function(e){e.addEventListener("mousedown",(function(t){(t.target.classList.contains("popup_opened")||t.target.classList.contains("popup__close"))&&B(e)}))})),d.addEventListener("click",(function(){E.value=_.textContent,S.value=m.textContent,C.toggleButtonState(),C.resetError(),x(c)})),p.addEventListener("click",(function(){x(u)}))})();